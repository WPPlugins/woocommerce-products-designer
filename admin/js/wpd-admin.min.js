
(function(a){a(document).ready(function(){a(".edit-php.post-type-wpc-template .wrap h2 .add-new-h2").show();a(document).on("click",".wpc_img_upload",function(g){g.preventDefault();var d=a(this).attr("data-selector");var f=wp.media({title:"Please set the picture",button:{text:"Set Image"},multiple:false}).on("select",function(){var e=f.state().get("selection");e.map(function(h){h=h.toJSON();a("#"+d).attr("value",h.id);a("#"+d+"_preview").html("<img src='"+h.url+"'>")})}).open()});a(document).on("click","#wpc-add-clipart",function(h){h.preventDefault();var d=a(this).attr("data-selector");var f=a(this);var g=wp.media({title:"Please set the picture",button:{text:"Set Image"},multiple:true}).on("select",function(){var e=g.state().get("selection");e.map(function(j){j=j.toJSON();var i="<input type='hidden' value='"+j.id+"' name='selected-cliparts[]'>";i=i+"<span class='wpc-clipart-holder'><img src='"+j.url+"'>";i=i+"<label>Price: <input type='text' value='0' name='wpc-cliparts-prices[]'></label>";i=i+"<a href='#' class='button wpc-remove-clipart' data-id='"+j.id+"'>Remove</a></span>";a("#cliparts-container").prepend(i)})}).open()});a(document).on("click",".wpc-remove-clipart",function(d){d.preventDefault();var f=a(this).data("id");a('#cliparts-form > input[value="'+f+'"]').remove();a(this).parent().remove()});a(document).on("click",".o-add-media",function(g){g.preventDefault();var d=a(this);var f=wp.media({title:"Please set the picture",button:{text:"Select picture(s)"},multiple:false}).on("select",function(){var e=f.state().get("selection");e.map(function(h){h=h.toJSON();d.parent().find("input[type=hidden]").val(h.id);d.parent().find(".media-preview").html("<img src='"+h.url+"'>")})}).open()});a(document).on("click",".o-remove-media",function(d){d.preventDefault();a(this).parent().find(".media-preview").html("");a(this).parent().find("input[type=hidden]").val("")});a(".wpc_order_item").each(function(){var d=a(this).attr("data-item");a(this).insertBefore(a("#order_items_list .item[data-order_item_id='"+d+"'] td.name table"));a(this).insertBefore(a("#order_line_items .item[data-order_item_id='"+d+"'] td.name table"))});a(document).on("click","#wpc-customizer button",function(d){d.preventDefault()});a(document).on("change",".wpc-activate-part-cb",function(h){var f=a(this).is(":checked");var d=a(this).attr("data-selector");var g=d+"_preview";if(f){a("#"+d).attr("value",0)}else{a("#"+d).attr("value","")}a("#"+g).html("")});a(document).on("change",".wpc-ovni-cb",function(g){var f=a(this).is(":checked");var d=a(this).parent().find("input[type=hidden]");if(f){d.val(1)}else{d.val(-1)}});a(document).on("click",".wpc_img_remove",function(h){h.preventDefault();var g=a(this).siblings(".wpc-activate-part-cb").is(":checked");var d=a(this).attr("data-selector");var f=d+"_preview";if(g){a("#"+d).attr("value",0)}else{a("#"+d).attr("value","")}a("#"+f).html("")});a("#wpc_output_setting_tab_data").on("show",function(){c("#wpc_output_setting_tab_data","get_output_setting_tab_data_content")});a("#wpc_parts_tab_data").on("show",function(){c("#wpc_parts_tab_data","get_product_tab_data_content")});function c(g,f){var d=a("#post_ID").val();var e=a("#product-type").val();var h=new Object();a.each(a(".woocommerce_variation h3"),function(){var k=a(this).find("[name^='attribute_']");var i=[];var j=a(this).find(".remove_variation").first().attr("rel");a.each(k,function(){i.push(a(this).val())});h[j]=i});a.post(ajax_object.ajax_url,{action:f,product_id:d,post_type:e,variations:h},function(i){a(g).html(i)})}a('a[href*="post-new.php?post_type=wpc-template"]').click(function(d){d.preventDefault();a("#wpc-products-selector-modal").modal("show")});a("#wpc-select-template").click(function(g){var f=a("input[name=template_base_pdt]:checked").val();if(typeof f=="undefined"){alert("Please select a product first")}else{var d=a('a[href$="post-new.php?post_type=wpc-template"]').first().attr("href");a(location).attr("href",d+"&base-product="+f)}});a("#wpc-settings .help_tip").each(function(d,g){var f=a(g).data("tip");a(g).tooltip({title:f})});a("#wpc-settings [name='wpc-colors-options[wpc-color-palette]']").change(function(){var d=a(this).val();if(d=="custom"){a("#wpd-predefined-colors-options").show()}else{a("#wpd-predefined-colors-options").hide()}});a(document).on("keyup","#wpc-settings [name='wpc-colors-options[wpc-custom-palette][]']",function(f){var d=a(this).val();a(this).css("background-color",d)});a("#wpc-settings #wpc-add-color").click(function(d){d.preventDefault();var f='<div><input type="text" name="wpc-colors-options[wpc-custom-palette][]" class="wpc-color"><button class="button wpc-remove-color">Remove</button></div>';a("#wpc-settings .wpc-colors").append(f);b()});a(document).on("click","#wpc-settings .wpc-remove-color",function(d){d.preventDefault();a(this).parent().remove()});a(document).on("click",".wpc-add-rule",function(i){var f=a(".wpc-rules-table tr").length;var d=a(this).data("group");var j=a("#wpc-rule-tpl").val();var h=j.replace(/{rule-group}/g,d);var g=h.replace(/{rule-index}/g,f);a(this).parents(".wpc-rules-table").find("tbody").append(g);a(this).parents(".wpc-rules-table").find(".a_price").attr("rowspan",f+1)});a(document).on("click",".wpc-add-group",function(j){var g=0;var d=a(".wpc-rules-table").length;var k=a("#wpc-first-rule-tpl").val();var i=k.replace(/{rule-group}/g,d);var h=i.replace(/{rule-index}/g,g);var f='<table class="wpc-rules-table widefat"><tbody>'+h+"</tbody></table>";a(".wpc-rules-table-container").append(f)});a(document).on("click",".wpc-remove-rule",function(d){var f=a(".wpc-rules-table tr").length;a(this).parents(".wpc-rules-table").find(".a_price").attr("rowspan",f-1);a(this).parents("tr").remove()});a(document).on("change","#wpc-settings tr:first-child input[name^='wpc-texts-options']",function(f){var d=a(this).is(":checked");a("#wpc-settings tr:not(:first-child) label[for^='wpc-texts-options'] input[type='checkbox']").prop("checked",d)});a(document).on("change","#wpc-settings tr:first-child input[name^='wpc-shapes-options']",function(f){var d=a(this).is(":checked");a("#wpc-settings tr:not(:first-child) label[for^='wpc-shapes-options'] input[type='checkbox']").prop("checked",d)});a(document).on("change","#wpc-settings tr:first-child input[name^='wpc-images-options']",function(f){var d=a(this).is(":checked");a("#wpc-settings tr:not(:first-child) label[for^='wpc-images-options'] input[type='checkbox']").prop("checked",d)});a(document).on("change","#wpc-settings tr:first-child input[name^='wpc-upload-options']",function(f){var d=a(this).is(":checked");a("#wpc-settings tr:not(:first-child) label[for^='wpc-upload-options'] input[type='checkbox']").prop("checked",d)});a(document).on("change","#wpc-settings tr:first-child input[name^='wpc-designs-options']",function(f){var d=a(this).is(":checked");a("#wpc-settings tr:not(:first-child) label[for^='wpc-designs-options'] input[type='checkbox']").prop("checked",d)});a(document).on("keyup",".color_field",function(f){var d=a(this).val();a(this).css("background-color",d)});a(document).on("click",".add_icon",function(h){h.preventDefault();var f=a(this).data("tab");var d=a(this).data("name");var g=wp.media({title:"Please set the picture",button:{text:"Set Image"},multiple:true}).on("select",function(){var e=g.state().get("selection");e.map(function(j){j=j.toJSON();var i="<div><input type='hidden' value='"+j.id+"' name='"+f+"["+d+"]'><img src='"+j.url+"'><a href='#' class='add_icon button' title='Add Icon'>Add Icon</a></div>";i=i+"<div class='remove_button'><a href='#' class='button wpc-remove-icon' data-id=''>Remove</a></div>";a("#"+d+"_icon").html(i)})}).open()});a(document).on("click",".wpc-remove-icon",function(f){f.preventDefault();var d=a(this).data("tab");a(this).parents(".wpc_images_data").find("img").attr("src","");a(this).parents(".wpc_images_data").find("input[type=hidden]").val("")});b();function b(){a(".wpc-color").each(function(d,f){var h=a(this);var g=h.val();h.css("background-color",g);a(this).ColorPicker({color:g,onShow:function(e){a(e).fadeIn(500);return false},onChange:function(e,j,i){h.css("background-color","#"+j);h.val("#"+j)}})})}a(".TabbedPanels").each(function(){var d="tabbedpanels_"+a(this).attr("id");var e=(a.cookie(d)?parseInt(a.cookie(d)):0);new Spry.Widget.TabbedPanels(a(this).attr("id"),{defaultTab:e-1})});a(".TabbedPanelsTab").click(function(e){var d="tabbedpanels_"+a(this).parent().parent(".TabbedPanels").attr("id");a.cookie(d,parseInt(a(this).attr("tabindex")))})})})(jQuery);