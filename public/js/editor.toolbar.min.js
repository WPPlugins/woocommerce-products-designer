
var WPD_EDITOR=(function(c,b){c(document).on("touchstart click","#grid-btn",function(d){c(".upper-canvas").toggleClass("wpc-canvas-grid")});c(document).on("touchstart click","#clear_all_btn",function(f){f.preventDefault();var d=confirm(wpd.translated_strings.delete_all_msg);if(d){b.canvas.clear();b.save_canvas()}});c(document).on("touchstart click","#delete_btn",function(h){h.preventDefault();var f=b.canvas.getActiveObject();var g=b.canvas.getActiveGroup();var d;if(f!=null){if(f.lockDeletion){alert(wpd.translated_strings.deletion_error_msg)}else{d=confirm(wpd.translated_strings.delete_msg);if(d){b.canvas.remove(f);b.canvas.calcOffset();b.canvas.renderAll();b.save_canvas()}}}else{if(g!=null){if(g.lockDeletion){alert(wpd.translated_strings.deletion_error_msg)}else{d=confirm("Do you really want to delete the selected items?");if(d){g.forEachObject(function(e){b.canvas.remove(e)});b.canvas.discardActiveGroup();b.canvas.calcOffset();b.canvas.renderAll();b.save_canvas()}}}}});c(document).on("touchstart click","#copy_paste_btn",function(i){i.preventDefault();var f=b.canvas.getActiveObject();var g=b.canvas.getActiveGroup();if(g!=null){var d=new fabric.Group();b.canvas.discardActiveGroup();b.canvas.renderAll();var h=canvas.getObjects();c.each(h,function(e,j){if(g.contains(j)){a(j,false)}});b.canvas.renderAll();b.save_canvas()}else{if(f!=null){b.canvas.discardActiveObject();a(f,true);b.save_canvas()}}});function a(d,e){var f=fabric.util.object.clone(d);f.set("top",f.top+5);f.set("left",f.left+5);b.setCustomProperties(f);b.canvas.add(f);if(e){b.canvas.renderAll();b.save_canvas()}}c(document).on("touchstart click","#bring_to_front_btn",function(g){g.preventDefault();var d=b.canvas.getActiveObject();var f=b.canvas.getActiveGroup();if(d!=null){b.canvas.bringForward(d);b.canvas.renderAll();b.save_canvas()}else{if(f!=null){f.forEachObject(function(e){b.canvas.bringForward(e)});b.canvas.discardActiveGroup();b.canvas.renderAll();b.save_canvas()}}});c(document).on("touchstart click","#send_to_back_btn",function(g){g.preventDefault();var d=b.canvas.getActiveObject();var f=b.canvas.getActiveGroup();if(d!=null){b.canvas.sendBackwards(d);b.canvas.renderAll();b.save_canvas()}else{if(f!=null){f.forEachObject(function(e){b.canvas.sendBackwards(e)});b.canvas.discardActiveGroup();b.canvas.renderAll();b.save_canvas()}}});c(document).on("touchstart click","#flip_h_btn",function(g){g.preventDefault();var d=b.canvas.getActiveObject();var f=b.canvas.getActiveGroup();if(d!=null){if(d.get("flipX")==true){d.set("flipX",false)}else{d.set("flipX",true)}b.canvas.renderAll();b.save_canvas()}else{if(f!=null){if(f.get("flipX")==true){f.set("flipX",false)}else{f.set("flipX",true)}b.canvas.renderAll();b.save_canvas()}}});c(document).on("touchstart click","#flip_v_btn",function(g){g.preventDefault();var d=b.canvas.getActiveObject();var f=b.canvas.getActiveGroup();if(d!=null){if(d.get("flipY")==true){d.set("flipY",false)}else{d.set("flipY",true)}b.canvas.renderAll();b.save_canvas()}else{if(f!=null){if(f.get("flipY")==true){f.set("flipY",false)}else{f.set("flipY",true)}b.canvas.renderAll();b.save_canvas()}}});c(document).on("touchstart click","#align_h_btn",function(g){g.preventDefault();var d=b.canvas.getActiveObject();var f=b.canvas.getActiveGroup();if(d!=null){b.centerObjectH(d);b.canvas.renderAll();d.setCoords();b.save_canvas()}else{if(f!=null){b.centerObjectH(f);b.canvas.renderAll();f.setCoords();b.save_canvas()}}});c(document).on("touchstart click","#align_v_btn",function(g){g.preventDefault();var d=b.canvas.getActiveObject();var f=b.canvas.getActiveGroup();if(d!=null){b.centerObjectV(d);b.canvas.renderAll();d.setCoords();b.save_canvas()}else{if(f!=null){b.centerObjectV(f);b.canvas.renderAll();f.setCoords();b.save_canvas()}}});c(document).on("touchstart click","#undo-btn",function(f){f.preventDefault();var d=c("#wpc-parts-bar > li:eq("+b.selected_part+")").attr("data-id");if(!c(this).hasClass("disabled")&&b.canvasManipulationsPosition[d]>0){b.canvas.clear();b.canvasManipulationsPosition[d]--;b.canvas.loadFromJSON(b.serialized_parts[d][b.canvasManipulationsPosition[d]]);b.refresh_undo_redo_status()}});c(document).on("touchstart click","#redo-btn",function(f){f.preventDefault();var d=c("#wpc-parts-bar > li:eq("+b.selected_part+")").attr("data-id");if(!c(this).hasClass("disabled")){b.canvas.clear();b.canvasManipulationsPosition[d]++;b.canvas.loadFromJSON(b.serialized_parts[d][b.canvasManipulationsPosition[d]]);b.refresh_undo_redo_status()}});return b}(jQuery,(WPD_EDITOR||{})));