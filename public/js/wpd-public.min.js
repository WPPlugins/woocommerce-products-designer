(function(a){a(document).ready(function(){a(document).on("touchstart click",".wpc-customize-product",function(){var g=0;var f=a(this).data("type");if(f=="simple"){g=a(this).data("id")}else{if(f=="variable"){g=a("input[name='variation_id']").val()}}if(!g){alert("Select the product options first");return}else{a.get(ajax_object.ajax_url,{action:"get_customizer_url",variation_id:g},function(h){if(h.url){a(location).attr("href",h.url)}},"json")}});a(document).on("touchstart click",".wpc-upload-product-design",function(h){h.preventDefault();var g=0;var f=a(this).data("type");if(f=="simple"){g=a(this).data("id")}else{if(f=="variable"){g=a("input[name='variation_id']").val()}}if(!g){alert("Select the product options first");return}else{a(".wpc-uploaded-design-container").css("display","inline-block");a("#wpc-product-id-upl").val(g);a(this).hide()}});a(".native-uploader #user-custom-design").change(function(){var f=a(this).val().toLowerCase();if(f!=""){a("#custom-upload-form").ajaxForm({success:b}).submit()}});if(a("#custom-upload-form.custom-uploader").length){var d=a("#custom-upload-form.custom-uploader .acd-upload-info");a("#custom-upload-form.custom-uploader").fileupload({dropZone:a("#drop"),url:ajax_object.ajax_url,add:function(i,h){var f=a('<div class="working"><div class="acd-info"></div><div class="acd-progress-bar"><div class="acd-progress"></div></div></div>');f.find(".acd-info").text(h.files[0].name).append("<i>"+c(h.files[0].size)+"</i>");d.html("");h.context=f.appendTo(d);f.find("input").knob();f.find("span").click(function(){if(f.hasClass("working")){g.abort()}f.fadeOut(function(){f.remove()})});var g=h.submit()},progress:function(h,g){var f=parseInt(g.loaded/g.total*100,10);g.context.find(".acd-progress").css("width",f+"%");if(f==100){g.context.removeClass("working")}},fail:function(g,f){f.context.addClass("error")},done:function(g,f){b(f.result,false,false,false)}})}if(a(".wpd-design-opt .ninja-forms-form").length>0){if(a(".cart").length>0){a(document).on("change",".ninja-forms-form .ninja-forms-field",function(){if(a("#wpd-design-opt-price").length<1){a("<input>").attr({type:"hidden",id:"wpd-design-opt-price",name:"wpd-design-opt"}).appendTo(".cart")}var g=a('.ninja-forms-form .calc-wrap input[type = "text"]').val();var f=get_design_options();f.opt_price=g;console.log(f);a("#wpd-design-opt-price").val(JSON.stringify(f));if(a(".amount").length>0){a(".amount").html(a(".wpd-design-opt").data("currency_symbol")+" "+(parseFloat(a(".wpd-design-opt").data("regular_price"))+parseFloat(g)))}})}else{a(document).on("change",'.ninja-forms-form .calc-wrap input[type = "text"]',function(){var f=a(this).val();if(a("#wpd-qty").length>0){a("#wpd-qty").attr("opt_price",f);a("#wpd-qty").trigger("change")}else{return f}})}}function b(h,i,j,g){if(e(h)){var f=a.parseJSON(h);if(f.success){a("#wpc-uploaded-file").html(f.message)}else{alert(f.message)}}else{console.log(h)}a("#user-custom-design").val("")}function c(f){if(typeof f!=="number"){return""}if(f>=1000000000){return(f/1000000000).toFixed(2)+" GB"}if(f>=1000000){return(f/1000000).toFixed(2)+" MB"}return(f/1000).toFixed(2)+" KB"}function e(f){if(/^[\],:{}\s]*$/.test(f.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return true}else{return false}}})})(jQuery);function get_design_options(){var d={};var a={};jQuery(".ninja-forms-form-wrap").find("input[type=text], input[type=checkbox], input[type=radio], input[type=number], select, textarea, input[name=_form_id]").each(function(g){var f=jQuery(this).attr("name");if(f!=""&&typeof f!="undefined"){var h=jQuery(this).attr("type");var i="";if(h=="radio"){if(jQuery(".ninja-forms-form-wrap [name="+f+"]:checked").length){i=jQuery(".ninja-forms-form-wrap [name="+f+"]:checked").val()}else{i=""}}else{if(h=="checkbox"){if(jQuery(this).parents(".list-checkbox-wrap").length>0){i=(a.hasOwnProperty(f))?a[f]:"";if((jQuery(this).is(":checked"))){i+=jQuery(this).val()+": checked; "}else{i+=jQuery(this).val()+": unchecked; "}}else{if((jQuery(this).is(":checked"))){i=" checked"}else{i=" unchecked"}}}else{if(jQuery.isArray(jQuery(this).val())){var e=jQuery(this).val();jQuery.each(e,function(k,j){if(k<(e.length-1)){i+=j+" | "}else{i+=j}})}else{i=jQuery(this).val()}}}a[f]=i}});var c={};if(jQuery("#wpd-qty").length>0){var b=jQuery("#wpd-qty").attr("opt_price");if(b!="undefined"){c.opt_price=b}c.wpc_design_opt_list=a;return c}else{c.wpc_design_opt_list=a;return c}};