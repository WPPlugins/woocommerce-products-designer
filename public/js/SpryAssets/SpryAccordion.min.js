(function(){if(typeof Spry=="undefined"){window.Spry={}}if(!Spry.Widget){Spry.Widget={}}Spry.Widget.Accordion=function(a,b){this.element=this.getElement(a);this.defaultPanel=0;this.hoverClass="AccordionPanelTabHover";this.openClass="AccordionPanelOpen";this.closedClass="AccordionPanelClosed";this.focusedClass="AccordionFocused";this.enableAnimation=true;this.enableKeyboardNavigation=true;this.currentPanel=null;this.animator=null;this.hasFocus=null;this.previousPanelKeyCode=Spry.Widget.Accordion.KEY_UP;this.nextPanelKeyCode=Spry.Widget.Accordion.KEY_DOWN;this.useFixedPanelHeights=true;this.fixedPanelHeight=0;Spry.Widget.Accordion.setOptions(this,b,true);if(this.element){this.attachBehaviors()}};Spry.Widget.Accordion.prototype.getElement=function(a){if(a&&typeof a=="string"){return document.getElementById(a)}return a};Spry.Widget.Accordion.prototype.addClassName=function(b,a){if(!b||!a||(b.className&&b.className.search(new RegExp("\\b"+a+"\\b"))!=-1)){return}b.className+=(b.className?" ":"")+a};Spry.Widget.Accordion.prototype.removeClassName=function(b,a){if(!b||!a||(b.className&&b.className.search(new RegExp("\\b"+a+"\\b"))==-1)){return}b.className=b.className.replace(new RegExp("\\s*\\b"+a+"\\b","g"),"")};Spry.Widget.Accordion.setOptions=function(d,c,a){if(!c){return}for(var b in c){if(a&&c[b]==undefined){continue}d[b]=c[b]}};Spry.Widget.Accordion.prototype.onPanelTabMouseOver=function(b,a){if(a){this.addClassName(this.getPanelTab(a),this.hoverClass)}return false};Spry.Widget.Accordion.prototype.onPanelTabMouseOut=function(b,a){if(a){this.removeClassName(this.getPanelTab(a),this.hoverClass)}return false};Spry.Widget.Accordion.prototype.openPanel=function(c){var e=this.currentPanel;var d;if(typeof c=="number"){d=this.getPanels()[c]}else{d=this.getElement(c)}if(!d||e==d){return null}var b=e?this.getPanelContent(e):null;var a=this.getPanelContent(d);if(!a){return null}if(this.useFixedPanelHeights&&!this.fixedPanelHeight){this.fixedPanelHeight=(b.offsetHeight)?b.offsetHeight:b.scrollHeight}if(this.enableAnimation){if(this.animator){this.animator.stop()}this.animator=new Spry.Widget.Accordion.PanelAnimator(this,d,{duration:this.duration,fps:this.fps,transition:this.transition});this.animator.start()}else{if(b){b.style.display="none";b.style.height="0px"}a.style.display="block";a.style.height=this.useFixedPanelHeights?this.fixedPanelHeight+"px":"auto"}if(e){this.removeClassName(e,this.openClass);this.addClassName(e,this.closedClass)}this.removeClassName(d,this.closedClass);this.addClassName(d,this.openClass);this.currentPanel=d;return d};Spry.Widget.Accordion.prototype.closePanel=function(){if(!this.useFixedPanelHeights&&this.currentPanel){var a=this.currentPanel;var b=this.getPanelContent(a);if(b){if(this.enableAnimation){if(this.animator){this.animator.stop()}this.animator=new Spry.Widget.Accordion.PanelAnimator(this,null,{duration:this.duration,fps:this.fps,transition:this.transition});this.animator.start()}else{b.style.display="none";b.style.height="0px"}}this.removeClassName(a,this.openClass);this.addClassName(a,this.closedClass);this.currentPanel=null}};Spry.Widget.Accordion.prototype.openNextPanel=function(){return this.openPanel(this.getCurrentPanelIndex()+1)};Spry.Widget.Accordion.prototype.openPreviousPanel=function(){return this.openPanel(this.getCurrentPanelIndex()-1)};Spry.Widget.Accordion.prototype.openFirstPanel=function(){return this.openPanel(0)};Spry.Widget.Accordion.prototype.openLastPanel=function(){var a=this.getPanels();return this.openPanel(a[a.length-1])};Spry.Widget.Accordion.prototype.onPanelTabClick=function(b,a){if(a!=this.currentPanel){this.openPanel(a)}else{this.closePanel()}if(this.enableKeyboardNavigation){this.focus()}if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}if(b.stopPropagation){b.stopPropagation()}else{b.cancelBubble=true}return false};Spry.Widget.Accordion.prototype.onFocus=function(a){this.hasFocus=true;this.addClassName(this.element,this.focusedClass);return false};Spry.Widget.Accordion.prototype.onBlur=function(a){this.hasFocus=false;this.removeClassName(this.element,this.focusedClass);return false};Spry.Widget.Accordion.KEY_UP=38;Spry.Widget.Accordion.KEY_DOWN=40;Spry.Widget.Accordion.prototype.onKeyDown=function(c){var b=c.keyCode;if(!this.hasFocus||(b!=this.previousPanelKeyCode&&b!=this.nextPanelKeyCode)){return true}var a=this.getPanels();if(!a||a.length<1){return false}var f=this.currentPanel?this.currentPanel:a[0];var d=(b==this.nextPanelKeyCode)?f.nextSibling:f.previousSibling;while(d){if(d.nodeType==1){break}d=(b==this.nextPanelKeyCode)?d.nextSibling:d.previousSibling}if(d&&f!=d){this.openPanel(d)}if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}if(c.stopPropagation){c.stopPropagation()}else{c.cancelBubble=true}return false};Spry.Widget.Accordion.prototype.attachPanelHandlers=function(a){if(!a){return}var c=this.getPanelTab(a);if(c){var b=this;Spry.Widget.Accordion.addEventListener(c,"click",function(d){return b.onPanelTabClick(d,a)},false);Spry.Widget.Accordion.addEventListener(c,"mouseover",function(d){return b.onPanelTabMouseOver(d,a)},false);Spry.Widget.Accordion.addEventListener(c,"mouseout",function(d){return b.onPanelTabMouseOut(d,a)},false)}};Spry.Widget.Accordion.addEventListener=function(c,b,d,a){try{if(c.addEventListener){c.addEventListener(b,d,a)}else{if(c.attachEvent){c.attachEvent("on"+b,d)}}}catch(f){}};Spry.Widget.Accordion.prototype.initPanel=function(a,c){var b=this.getPanelContent(a);if(c){this.currentPanel=a;this.removeClassName(a,this.closedClass);this.addClassName(a,this.openClass);if(b){if(this.useFixedPanelHeights){if(this.fixedPanelHeight){b.style.height=this.fixedPanelHeight+"px"}}else{b.style.height="auto"}}}else{this.removeClassName(a,this.openClass);this.addClassName(a,this.closedClass);if(b){b.style.height="0px";b.style.display="none"}}this.attachPanelHandlers(a)};Spry.Widget.Accordion.prototype.attachBehaviors=function(){var b=this.getPanels();for(var c=0;c<b.length;c++){this.initPanel(b[c],c==this.defaultPanel)}this.enableKeyboardNavigation=(this.enableKeyboardNavigation&&this.element.attributes.getNamedItem("tabindex"));if(this.enableKeyboardNavigation){var a=this;Spry.Widget.Accordion.addEventListener(this.element,"focus",function(d){return a.onFocus(d)},false);Spry.Widget.Accordion.addEventListener(this.element,"blur",function(d){return a.onBlur(d)},false);Spry.Widget.Accordion.addEventListener(this.element,"keydown",function(d){return a.onKeyDown(d)},false)}};Spry.Widget.Accordion.prototype.getPanels=function(){return this.getElementChildren(this.element)};Spry.Widget.Accordion.prototype.getCurrentPanel=function(){return this.currentPanel};Spry.Widget.Accordion.prototype.getPanelIndex=function(a){var b=this.getPanels();for(var c=0;c<b.length;c++){if(a==b[c]){return c}}return -1};Spry.Widget.Accordion.prototype.getCurrentPanelIndex=function(){return this.getPanelIndex(this.currentPanel)};Spry.Widget.Accordion.prototype.getPanelTab=function(a){if(!a){return null}return this.getElementChildren(a)[0]};Spry.Widget.Accordion.prototype.getPanelContent=function(a){if(!a){return null}return this.getElementChildren(a)[1]};Spry.Widget.Accordion.prototype.getElementChildren=function(b){var a=[];var c=b.firstChild;while(c){if(c.nodeType==1){a.push(c)}c=c.nextSibling}return a};Spry.Widget.Accordion.prototype.focus=function(){if(this.element&&this.element.focus){this.element.focus()}};Spry.Widget.Accordion.prototype.blur=function(){if(this.element&&this.element.blur){this.element.blur()}};Spry.Widget.Accordion.PanelAnimator=function(j,b,a){this.timer=null;this.interval=0;this.fps=60;this.duration=500;this.startTime=0;this.transition=Spry.Widget.Accordion.PanelAnimator.defaultTransition;this.onComplete=null;this.panel=b;this.panelToOpen=j.getElement(b);this.panelData=[];this.useFixedPanelHeights=j.useFixedPanelHeights;Spry.Widget.Accordion.setOptions(this,a,true);this.interval=Math.floor(1000/this.fps);var k=j.getPanels();for(var f=0;f<k.length;f++){var d=k[f];var l=j.getPanelContent(d);if(l){var g=l.offsetHeight;if(g==undefined){g=0}if(d==b&&g==0){l.style.display="block"}if(d==b||g>0){var e=new Object;e.panel=d;e.content=l;e.fromHeight=g;e.toHeight=(d==b)?(j.useFixedPanelHeights?j.fixedPanelHeight:l.scrollHeight):0;e.distance=e.toHeight-e.fromHeight;e.overflow=l.style.overflow;this.panelData.push(e);l.style.overflow="hidden";l.style.height=g+"px"}}}};Spry.Widget.Accordion.PanelAnimator.defaultTransition=function(d,b,a,c){d/=c;return b+((2-d)*d*a)};Spry.Widget.Accordion.PanelAnimator.prototype.start=function(){var a=this;this.startTime=(new Date).getTime();this.timer=setTimeout(function(){a.stepAnimation()},this.interval)};Spry.Widget.Accordion.PanelAnimator.prototype.stop=function(){if(this.timer){clearTimeout(this.timer);for(i=0;i<this.panelData.length;i++){obj=this.panelData[i];obj.content.style.overflow=obj.overflow}}this.timer=null};Spry.Widget.Accordion.PanelAnimator.prototype.stepAnimation=function(){var e=(new Date).getTime();var b=e-this.startTime;var d,f;if(b>=this.duration){for(d=0;d<this.panelData.length;d++){f=this.panelData[d];if(f.panel!=this.panel){f.content.style.display="none";f.content.style.height="0px"}f.content.style.overflow=f.overflow;f.content.style.height=(this.useFixedPanelHeights||f.toHeight==0)?f.toHeight+"px":"auto"}if(this.onComplete){this.onComplete()}return}for(d=0;d<this.panelData.length;d++){f=this.panelData[d];var c=this.transition(b,f.fromHeight,f.distance,this.duration);f.content.style.height=((c<0)?0:c)+"px"}var a=this;this.timer=setTimeout(function(){a.stepAnimation()},this.interval)}})();